<!doctype html>
<html style="height:100%;margin:0">

<head>
    <title>Goodbye Glacier Ride</title>
    <link rel="icon" type="image/x-icon" href="img/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="css/style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

</head>

<body style="height:100%;margin:0">
    <div class="wrapper">
        <div class="header"></div>
        <div class="main">
            <div class="section">
                <div class="image_section">
                    <img alt="" src="img/render12.png" style="width: 100%;">
                </div>
            </div>
            <div class="section">
                <div class="text_section">
                    <h1>Goodbye Glacier Ride</h1>
                    <p>A 1.500 km cycling trip from Munich to Monaco Casino with 30.000 altimeters. Passing the massive
                        glaciers of the Alps and crossing its most spectacular cols.
                        A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality of
                        climate change.
                        <br> <br>
                        Ready to join the Goodbye Glacier Ride?
                    </p>
                </div>
            </div>
            <div class="section">
                <div class="image_section">
                    <div class="center_image_section">
                        <img alt="" src="img/finalggr.png" width="300">

                    </div>
                   
                </div>
            </div><div class="section">
            <div class="section_title">The Route</div></div>
            <div class="section">
                <div class="anim">
                    <div class="anim_left">
                        <div class="route_section">
                            <div class="waypoint right_align">Munich</div>
                            <div class="day_section right_align">
                                <div class="route_data right_align">
                                    Day 1<br>119km<br>820m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">0 km</div>
                            <div class="day_section right_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">Sankt Valentin (IT)</div>
                            <div class="day_section right_align">
                                <div class="route_data right_align">
                                    Day 1<br>119km<br>820m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">0 km</div>
                            <div class="day_section right_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">Thusis (CH)</div>
                            <div class="day_section right_align">
                                <div class="route_data right_align">
                                    Day 1<br>119km<br>820m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">0 km</div>
                            <div class="day_section right_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">MÃ¶rel-Filet (CH)</div>
                            <div class="day_section right_align">
                                <div class="route_data right_align">
                                    Day 1<br>119km<br>820m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">0 km</div>
                            <div class="day_section right_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">Martigny (SW)</div>
                            <div class="day_section right_align">
                                <div class="route_data right_align">
                                    Day 1<br>119km<br>820m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">0 km</div>
                            <div class="day_section right_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">Bourg St. Maurice (FR)</div>
                            <div class="day_section right_align">
                                <div class="route_data right_align">
                                    Day 1<br>119km<br>820m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">0 km</div>
                            <div class="day_section right_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">Guillestre (FR)</div>
                            <div class="day_section right_align">
                                <div class="route_data right_align">
                                    Day 1<br>119km<br>820m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">0 km</div>
                            <div class="day_section right_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint right_align">Monaco Casino</div>
                            <div class="day_section right_align">

                            </div>
                        </div>

                    </div>
                    <div class="anim_mid">
                        <canvas id="cyclist2" width="200" height="5290"></canvas>
                    </div>
                    <div class="anim_right">
                        <div class="route_section">
                            <div class="waypoint left_align">119 km</div>
                            <div class="day_section left_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">Ehrwald (AT)</div>
                            <div class="day_section left_align">
                                <div class="route_data left_align">
                                    Day 2<br>118km<br>1.580m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">119 km</div>
                            <div class="day_section left_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">Livigno (IT)</div>
                            <div class="day_section left_align">
                                <div class="route_data left_align">
                                    Day 2<br>118km<br>1.580m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">119 km</div>
                            <div class="day_section left_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">Andermatt (CH)</div>
                            <div class="day_section left_align">
                                <div class="route_data left_align">
                                    Day 2<br>118km<br>1.580m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">119 km</div>
                            <div class="day_section left_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">Zermatt (SW)</div>
                            <div class="day_section left_align">
                                <div class="route_data left_align">
                                    Day 2<br>118km<br>1.580m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">119 km</div>
                            <div class="day_section left_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">Chamonix (FR)</div>
                            <div class="day_section left_align">
                                <div class="route_data left_align">
                                    Day 2<br>118km<br>1.580m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">119 km</div>
                            <div class="day_section left_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">Susa (IT)</div>
                            <div class="day_section left_align">
                                <div class="route_data left_align">
                                    Day 2<br>118km<br>1.580m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">119 km</div>
                            <div class="day_section left_align">
                                <div class="route_image"></div>

                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">Isola (FR)</div>
                            <div class="day_section left_align">
                                <div class="route_data left_align">
                                    Day 2<br>118km<br>1.580m
                                </div>
                            </div>
                        </div>
                        <div class="route_section">
                            <div class="waypoint left_align">119 km</div>
                            <div class="day_section left_align">

                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="section">
                <div class="image_section">
                    <div class="wrapperslider">
                        <div class="images">
                            <div class="img-1"></div>
                            <div class="img-2"></div>
                        </div>
                        <div class="slider">
                            <div class="drag-line">
                                <span></span>
                            </div>
                            <input type="range" min="0" max="100" value="50">
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="text_section">
                    <div class="column_section">
                        <div class="twocolumn">
                            <p>A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the massive
                                glaciers of the Alps and crossing its most spectacular cols.
                                A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality
                                of climate change.
                            </p>
                        </div>
                        <div class="twocolumn">
                            <p>
                                A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the
                                massive glaciers of the Alps and crossing its most spectacular cols.
                                A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality
                                of climate change.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="section">
                <div class="text_section">
                    <div class="column_section">
                        <div class="threecolumn">
                            <h2>Goodbye Glacier Ride</h2>
                            <p>A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the massive
                                glaciers of the Alps and crossing its most spectacular cols.
                                A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality
                                of climate change.
                            </p>
                        </div>
                        <div class="threecolumn">
                            <h2>Goodbye Glacier Ride</h2>
                            <p>
                                A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the
                                massive glaciers of the Alps and crossing its most spectacular cols.
                                A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality
                                of climate change.
                            </p>
                        </div>
                        <div class="threecolumn">
                            <h2>Goodbye Glacier Ride</h2>
                            <p>
                                A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the
                                massive glaciers of the Alps and crossing its most spectacular cols.
                                A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality
                                of climate change.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer"></div>
        </div>
        <script>

            // todo: start position, end position and refresh on scroll down, long page without having scrolled, catch up
            const html = document.documentElement;
            const canvas = document.getElementById("cyclist2");
            const context = canvas.getContext("2d");
            const frameCount = 144;
            const offset = 100; // when the cyclist starts animating
            const a = 5 // scroll resolution e.g. 1 animation frame per 5 pixels
            const currentFrame = index => (
                `img/animation/anim${index.toString()}.png`
            )
            var imageArray = []
            var index = 0
            const preloadImages = () => {
                for (let i = 1; i <= frameCount; i++) {
                    const img = new Image();
                    img.src = currentFrame(i);
                   
                    imageArray.push(img)
                }
            };
            context.beginPath();
            context.strokeStyle = "black"; 
            context.lineWidth = 2;
            context.moveTo(75, 0);
            context.setLineDash([35, 10]);
            context.lineTo(75, 75);
            context.stroke();
            context.beginPath();
            context.arc(75, 75, 15, 0, 2 * Math.PI, false);
            context.fillStyle = 'white';
            context.fill();
            context.lineWidth = 2;
            context.setLineDash([]);
            context.strokeStyle = 'black';
            context.stroke();
            const img3 = new Image();
             img3.src =`img/animation/straight.png`
            if (img3.complete) {
                context.drawImage(img3, 0, 0);
            } else {
                img3.onload = function () {
                    context.drawImage(img3, -50, -50);
                };
            }
           
            context.drawImage(img3, 100, 200);
            window.addEventListener('scroll', () => {
                const scrollTop = html.scrollTop;
                const canvasPos = canvas.getBoundingClientRect().top
                const startScroll = window.innerHeight / 2;
                const routeHeight = 5290;
              
                const updateImage = () => {

              

                    if (canvasPos <= startScroll) {
                     
                        var f = 2;
                        var w = 1440;
                        var h = 100 / 2;
                        function calcSineY(x) {
                            return h - h * Math.sin(x * 2 * Math.PI * (f / w));
                        }
                        context.clearRect(0, 0, canvas.width, canvas.height);
                        index = Math.floor((startScroll - canvasPos) / a) % (frameCount - 1);
                        posY = (Math.sin(((index) / (frameCount - 1) * 360) * Math.PI / 180) * 50) - 50
                        posX = (startScroll - canvasPos) - 50
                        context.beginPath();
                        context.strokeStyle = "black"; 
                        context.lineWidth = 2;
                        context.moveTo(75, 0);
                        context.setLineDash([35, 10]);
                        context.lineTo(75, 75);
                        context.stroke();


                        context.beginPath(); 
                        context.moveTo(75, 75);
                        context.setLineDash([35, 10]);
                        context.strokeStyle = "black"; 
                        for (var i = 0; i < Math.floor((startScroll - canvasPos)); i++) { 
                         if (i < 5080){
                            var y = calcSineY(i); 
                            
                            context.lineTo(150 - 25 - y, i + 75); 
                         }
                            
                           
                        }
                        context.stroke(); 
                        for (var p = 0; p < (Math.floor((startScroll - canvasPos) / 360) + 1); p++) {
                            var dir = 0
                            if (p % 2 !== 0) {
                                dir = 150
                            }
                            context.beginPath();
                            context.moveTo(75, 75 + (p) * 360);
                            context.setLineDash([]);
                            context.lineTo(dir, 75 + (p) * 360);
                            context.stroke();
                            context.beginPath();
                            context.arc(75, 75 + (p) * 360, 15, 0, 2 * Math.PI, false);
                            context.fillStyle = 'white';
                            context.fill();
                            context.lineWidth = 2;
                            context.setLineDash([]);
                            context.strokeStyle = 'black';
                            context.stroke();
                        }
                        if ((startScroll - canvasPos) <= 5050){
                            context.drawImage(imageArray[index], posY, posX);
                        }else{
                            context.drawImage(img3, -50, 5000);
                        }
                        
                    } else {
                        if (canvasPos > startScroll){

                            context.clearRect(0, 0, canvas.width, canvas.height);

                            context.beginPath();
                            context.strokeStyle = "black"; 
                            context.lineWidth = 2;
                            context.moveTo(75, 0);
                            context.setLineDash([35, 10]);
                            context.lineTo(75, 75);
                            context.stroke();
                            context.beginPath();
                            context.arc(75, 75, 15, 0, 2 * Math.PI, false);
                            context.fillStyle = 'white';
                            context.fill();
                            context.lineWidth = 2;
                            context.setLineDash([]);
                            context.strokeStyle = 'black';
                            context.stroke();
                            context.drawImage(img3, -50, -50);

                        }
                        // index = 0
                        // context.clearRect(0, 0, canvas.width, canvas.height);

                        // context.drawImage(imageArray[index], -50, -50, 250, 250);
                    }
                }
                requestAnimationFrame(() => updateImage())
            });
            preloadImages()
        </script>
        <script>
            const slider = document.querySelector(".slider input");
            const img = document.querySelector(".images .img-2");
            const dragLine = document.querySelector(".slider .drag-line");
            slider.oninput = () => {
                let sliderVal = slider.value;
                dragLine.style.left = sliderVal + "%";
                img.style.width = sliderVal + "%";
            }
        </script>

</body>

</html>