
<!doctype html>
<html style="height:100%;margin:0">
  <head>
    <title>Goodbye Glacier Ride</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
 
  </head>
  <body style="height:100%;margin:0">
    <div class="wrapper">
        <div class="header"></div>
        <div class="main">
            <div class="section">
                <div class="image_section">
                    <img alt="" src="img/render12.png" style="width: 100%;">
                </div>
            </div>
            <div class="section">
                <div class="text_section">
                    <h1 >Goodbye Glacier Ride</h1>
                    <p>A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the massive glaciers of the Alps and crossing its most spectacular cols.
                        A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality of climate change.
                        <br> <br>
                        Ready to join the Goodbye Glacier Ride?
                        </p>
                </div>
            </div>
            <div class="section">
              <div class="anim">
              
             <div class="anim_left">
              <div class="route_section">
                <div class="waypoint right_align">Munich</div>
                <div class="day_section right_align">
                  <div class="route_data right_align">
                  Day 1<br>119km<br>820m
                </div>
                </div>
              </div>
              <div class="route_section"> 
                <div class="waypoint right_align">0 km</div>   
                <div class="day_section right_align">
                  <div class="route_image"></div>

                </div>
             </div>
             </div>
             <div class="anim_mid">
              <svg id="route_svg" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 200 5290" preserveAspectRatio="none">
                <path class="theLine" 
                d="M 100,20
                Q	200	195	100	370
                Q	0	545	100	720
                Q	200	895	100	1070
                Q	0	1245	100	1420
                Q	200	1595	100	1770
                Q	0	1945	100	2120
                Q	200	2295	100	2470
                Q	0	2645	100	2820
                Q	200	2995	100	3170
                Q	0	3345	100	3520
                Q	200	3695	100	3870
                Q	0	4045	100	4220
                Q	200	4395	100	4570
                Q	0	4745	100	4920
                Q	200	5095	100	5270
                     
                   "
                fill="none" 
                stroke="black" 
                stroke-dasharray="35,10"
                stroke-width="2px" 
               />
               <circle class="ball " r="15" cx="100" cy="20"></circle>
               <circle class="ball " r="15" cx="100" cy="370"></circle>
               <circle class="ball " r="15" cx="100" cy="720"></circle>
               <circle class="ball " r="15" cx="100" cy="1070"></circle>
               <circle class="ball " r="15" cx="100" cy="1420"></circle>
               <circle class="ball " r="15" cx="100" cy="1770"></circle>
               <circle class="ball " r="15" cx="100" cy="2120"></circle>
               <circle class="ball " r="15" cx="100" cy="2470"></circle>
               <circle class="ball " r="15" cx="100" cy="2820"></circle>
               <circle class="ball " r="15" cx="100" cy="3170"></circle>
               <circle class="ball " r="15" cx="100" cy="3520"></circle>
               <circle class="ball " r="15" cx="100" cy="3870"></circle>
               <circle class="ball " r="15" cx="100" cy="4220"></circle>
               <circle class="ball " r="15" cx="100" cy="4570"></circle>
               <circle class="ball " r="15" cx="100" cy="4920"></circle>
               <circle class="ball " r="15" cx="100" cy="5270"></circle>
         
              </svg>
              <div id="cover" class="path_cover"></div>
              <canvas id="cyclist"></canvas>
             </div>
             <div class="anim_right">  
              <div class="route_section"> 
                <div class="waypoint left_align">119 km</div>   
                <div class="day_section left_align">
                  <div class="route_image"></div>

                </div>
              </div>
                <div class="route_section">
                  <div class="waypoint left_align">Ehrwald (AT)</div>
                  <div class="day_section left_align">
                    <div class="route_data left_align"> 
                    Day 2<br>118km<br>1.580m
                  </div> 
                  </div>
                </div>
             
            </div>
          
              </div>
            </div>
          </div>
            <div class="section">
              <div class="image_section">
              <div class="wrapperslider">
                <div class="images">
                  <div class="img-1"></div>
                  <div class="img-2"></div>
                </div>
                <div class="slider">
                  <div class="drag-line">
                    <span></span>
                  </div>
                  <input type="range" min="0" max="100" value="50">
                </div>
              </div>
              </div>
          </div>

            <div class="section">
              <div class="text_section">
                <div class="column_section">
                 <div class="twocolumn">
                 <p>A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the massive glaciers of the Alps and crossing its most spectacular cols.
                        A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality of climate change.
                      </p> 
                 </div>
                 <div class="twocolumn">
                  <p>
                  A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the massive glaciers of the Alps and crossing its most spectacular cols.
                  A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality of climate change.
                </p></div>
              </div>
            </div>
          </div>
            <div class="section">
              <div class="text_section">
                <div class="column_section">
                 <div class="threecolumn">
                  <h2>Goodbye Glacier Ride</h2>
                 <p>A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the massive glaciers of the Alps and crossing its most spectacular cols.
                        A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality of climate change.
                      </p> 
                 </div>
                 <div class="threecolumn">
                  <h2>Goodbye Glacier Ride</h2>
                  <p>
                  A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the massive glaciers of the Alps and crossing its most spectacular cols.
                  A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality of climate change.
                </p></div>
                <div class="threecolumn">
                  <h2>Goodbye Glacier Ride</h2>
                  <p>
                  A 1.500 km cycling trip from Munich to Monaco with 30.000 altimeters. Passing the massive glaciers of the Alps and crossing its most spectacular cols.
                  A two week cycling adventure to enjoy the beauty of the Alps and face the harsh reality of climate change.
                </p></div>
              </div>
            </div>
          </div>
         
        <div class="footer"></div>
    </div>
    <script>
      const html = document.documentElement;
      const cover = document.getElementById("cover");
      const route_svg = document.getElementById("route_svg");
      const canvas = document.getElementById("cyclist");
      const context = canvas.getContext("2d");
      const frameCount = 24;
      const currentFrame = index => (
        `img/animation/00${index.toString()}.png`
      )
      var imageArray = []
      var index = 0
      const preloadImages = () => {
        for (let i = 1; i <= frameCount; i++) {
          const img = new Image();
          // console.log(currentFrame(i))
          img.src = currentFrame(i);
          imageArray.push(img)
        }
        console.log(imageArray)
      };
      const img2 = new Image()
      img2.src = currentFrame(1);
      canvas.width=250;
      canvas.height=250;
      img2.onload=function(){
        context.drawImage(img2, 0, 0);
      }

     
      window.addEventListener('scroll', () => {  
        const scrollTop = html.scrollTop;
        const maxScrollTop = html.scrollHeight - window.innerHeight;
        const scrollFraction = scrollTop / maxScrollTop * 10;
       
        const svgPos = route_svg.getBoundingClientRect().top
        const startScroll =  window.innerHeight/2;
        
        const routeHeight = 5290;
        const updateImage = () => {
         
          if (svgPos <= startScroll){
            cover.style.height = routeHeight - (startScroll - svgPos)+"px";
            canvas.style.top = (startScroll - svgPos - 100)+"px";
            canvas.style.left = (Math.sin(((startScroll - svgPos)/700*360)*Math.PI/180)*50) - 20 + "px"
           


            if (index < frameCount - 1){
              index++
            }else{
              index = 0
            }
       
           
            context.clearRect(0, 0, canvas.width, canvas.height);
          
            context.drawImage(imageArray[index], 0, 0);
            }else{
              cover.style.height = routeHeight +"px";
            }
          // img2.src = currentFrame(index);
         
          // img2.src = currentFrame(index);
          // context.drawImage(img2, 0, 0);
        }
      
          
        requestAnimationFrame(() => updateImage())
       
      });

      preloadImages()
    </script>
    <script>
      const slider = document.querySelector(".slider input");
      const img = document.querySelector(".images .img-2");
      const dragLine = document.querySelector(".slider .drag-line");
      slider.oninput = ()=>{
        let sliderVal = slider.value;
        dragLine.style.left = sliderVal + "%";
        img.style.width = sliderVal + "%";
      }
    </script>
   
  </body>
</html>
